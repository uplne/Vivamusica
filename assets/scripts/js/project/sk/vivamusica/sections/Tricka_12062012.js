sk.vivamusica.sections.Tricka=function(){var f,i,c,j,o,g,d,k,h,l,m,n,p={},q=null;f=$(".trickoButton");i=$(".tricka .center");c=$(".skladatelSelector");j=$(".skladatel");o=$(".center");g=null;d=0;k="L";h=0;m=l="";n=0;var b={initStep1:function(){b.addEventsStep1();b.initSteps();b.stepsController(0)},addEventsStep1:function(){f.each(function(a){$(this).on({mouseover:function(){$(this).stop().animate({opacity:1},250)},mouseout:function(){$(this).stop().animate({opacity:0.6},250)},click:function(e){e.preventDefault();
g=a;b.removeEventsStep1();b.animOutStep1(a)}})})},initSteps:function(){$(".steps a").each(function(a){$(this).on("click",function(e){e.preventDefault();if(a<n)switch(b.resetAll(),a){case 0:location.reload(!0);break;case 1:b.animOutStep3(!0);b.animOutStep4(!0);b.animOutStep5(!0);b.startStep2();break;case 2:b.animOutStep4(!0);b.animOutStep5(!0);b.startStep3();break;case 3:b.animOutStep5(!0),b.startStep4()}})})},stepsController:function(a){$(".steps a:eq("+a+")").addClass("active");n=a;$(".steps a").each(function(b){b>
a&&$(this).hasClass("active")&&$(this).removeClass("active")})},resetAll:function(){f.each(function(){$(this).off()});c.find(".left").off().fadeOut("fast");c.find(".right").off().fadeOut("fast");c.find(".chcem").off().fadeOut("fast");var a=$(".velkost li a"),b=$(".velkost .chcem");a.each(function(){$(this).off()});b.off();$(".kusov .chcem").off();$(".form a").off()},removeEventsStep1:function(){f.each(function(){$(this).off()})},animOutStep1:function(a){$(".tricko"+a);f.each(function(b){b!=a&&$(this).fadeOut("slow")});
b.startStep2()},startStep2:function(){c.find(".left").show();c.find(".right").show();c.find(".chcem").show();c.css({left:0.5*o.width()-0.5*c.width()});var a=$(".tricko"+g);a.animate({left:0.5*i.width()-0.5*a.width()},800,function(){c.fadeIn("slow");c.find(".skladatel").fadeIn("slow")});b.startEventsStep2();b.stepsController(1)},startEventsStep2:function(){function a(a){var b=Math.round(j.width()/3),c=0;switch(a){case "left":0<d&&d--;c=b*d- -10;break;case "right":2>d&&d++,c=b*d- -10}j.stop().animate({left:-c},
600)}c.find(".left").on("click",function(b){b.preventDefault();a("left")});c.find(".right").on("click",function(b){b.preventDefault();a("right")});c.find(".chcem").on("click",function(a){a.preventDefault();b.removeEventsStep2();b.startStep3()})},removeEventsStep2:function(){c.find(".left").off().fadeOut("fast");c.find(".right").off().fadeOut("fast");c.find(".chcem").off().fadeOut("fast")},startStep3:function(){var a=$(".velkost"),e=$(".tricko"+g);a.find(".chcem").css({bottom:"165px",right:"-10px"});
e.animate({left:0.5*i.width()-0.5*e.width()},800);c.animate({left:"176px"},800,function(){c.fadeIn()});a.fadeIn("slow");b.startEventsStep3();b.stepsController(2)},startEventsStep3:function(){var a=$(".velkost li a"),c=$(".velkost .chcem");a.each(function(){$(this).on("click",function(a){a.preventDefault();var b=$(".check"),a=$(this);0<b.length&&b.fadeOut("fast",function(){b.remove()});a.append('<span class="check"></span>');$(".check").fadeIn("slow");k=a.text()})});c.on("click",function(a){a.preventDefault();
b.removeEventsStep3();b.animOutStep3()})},removeEventsStep3:function(){var a=$(".velkost li a"),b=$(".velkost .chcem");a.each(function(){$(this).off()});b.off()},animOutStep3:function(a){$(".velkost").fadeOut("fast",function(){a||b.startStep4()})},startStep4:function(){var a=$(".tricko"+g),e=$(".kusov");a.animate({left:"40px"},800);c.animate({left:"-49px"},800);e.find("input").val("");e.fadeIn("slow");b.startEventsStep4();b.stepsController(3)},startEventsStep4:function(){var a=$(".kusov .chcem"),
c=$(".kusov input"),d=$(".kusov span:eq(1)");a.css({bottom:"95px",right:"60px"}).on("click",function(a){a.preventDefault();h=c.val();0<h&&(b.removeEventsStep4(),b.animOutStep4())});c.on("keyup",function(){var a="kusov";switch(parseInt($(this).val())){case 1:a="kus.";break;case 2:case 3:case 4:a="kusy.";break;default:a="kusov."}d.text(a)})},removeEventsStep4:function(){$(".kusov .chcem").off()},animOutStep4:function(a){$(".kusov").fadeOut("fast",function(){a||b.startStep5()})},startStep5:function(){$(".form").fadeIn("slow");
b.startEventsStep5();b.stepsController(4)},startEventsStep5:function(){$(".form a").on("click",function(a){a.preventDefault();b.checkForm()})},checkForm:function(){var a=$(".input1"),c=$(".input2"),d=!0;""==a.val()&&(a.css({border:"1px solid #ed1c24"}),d=!1);/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(c.val())||(c.css({border:"1px solid #ed1c24"}),d=!1);d&&(l=a.val(),m=c.val(),b.sendForm())},sendForm:function(){$.ajax({type:"POST",cache:!1,url:"http://www.vivamusica.sk/app/data/process.reservation.php",
data:"name="+l+"&email="+m+"&tricko="+g+"&motiv="+d+"&velkost="+k+"&pocet="+h,dataType:"html",success:function(a){1==a&&(b.removeEventsStep5(),b.animOutStep5())}})},removeEventsStep5:function(){$(".form a").off()},animOutStep5:function(a){var d=$(".form"),f=$(".tricko"+g);a||f.fadeOut("fast");c.fadeOut("fast");d.fadeOut("fast",function(){a||b.startStep6()})},startStep6:function(){$(".thx").fadeIn("slow")}};p.initialize=function(){q=sk.vivamusica.utils.BoxController.factory("BoxNormal");var a=$(".tricka");
q.addBox(a);b.initStep1()};return p};